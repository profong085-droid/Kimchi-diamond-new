<!DOCTYPE html>
<html lang="km">
<head>
  <meta charset="UTF-8">
  <title>Kimchi Diamond – Top-Up Games</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{
      --bg-1: #0f1724;      /* deep navy */
      --bg-2: linear-gradient(135deg,#111827 0%, #0b1220 100%);
      --card-bg: rgba(255,255,255,0.04);
      --glass: rgba(255,255,255,0.03);
      --primary: #ff4d7e;
      --accent: #7c5cff;
      --muted: rgba(255,255,255,0.6);
      --success: #22c55e;
      --warning: #ffd166;
      --glass-border: rgba(255,255,255,0.06);
      --radius: 12px;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Kantumruy", Arial, sans-serif;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(124,92,255,0.07), transparent),
                  linear-gradient(180deg, #071021 0%, #081229 100%);
      color: #e6eef8;
      display:flex;
      flex-direction:column;
      min-height:100vh;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Top bar */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:18px 22px;
      background: linear-gradient(90deg, rgba(255,77,126,0.06), rgba(124,92,255,0.03));
      border-bottom: 1px solid var(--glass-border);
      backdrop-filter: blur(6px);
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:56px;height:56px;border-radius:14px;display:inline-flex;align-items:center;justify-content:center;
      background: linear-gradient(135deg,var(--primary),var(--accent));
      box-shadow: 0 6px 18px rgba(124,92,255,0.15), inset 0 -6px 18px rgba(0,0,0,0.12);
      color:white;font-weight:700;font-size:18px;border:2px solid rgba(255,255,255,0.06)
    }
    .brand h1{font-size:1.2rem;letter-spacing:0.2px;margin:0}
    .brand p{color:var(--muted);font-size:0.85rem;margin:0}

    .top-actions{display:flex;align-items:center;gap:12px}
    .user-points{
      background:var(--card-bg);
      padding:8px 12px;border-radius:999px;font-weight:600;color:var(--muted);
      border:1px solid var(--glass-border);display:flex;gap:8px;align-items:center;
    }
    .user-points i{color:var(--warning)}

    /* Main layout */
    .container{max-width:1200px;margin:26px auto;padding:0 20px;width:100%;display:grid;grid-template-columns: 320px 1fr;gap:24px;align-items:start}
    @media (max-width:980px){
      .container{grid-template-columns:1fr; padding:0 16px;}
    }

    /* Sidebar */
    .sidebar{
      position:sticky;top:20px;padding:18px;border-radius:var(--radius);
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid var(--glass-border);
      box-shadow: 0 6px 20px rgba(2,6,23,0.6);
    }
    .nav-menu{list-style:none;display:flex;flex-direction:column;gap:8px;margin-top:12px}
    .nav-menu a{
      display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:10px;color:var(--muted);
      text-decoration:none;font-weight:600;border:1px solid transparent;transition:all .18s;
    }
    .nav-menu a i{width:18px;text-align:center;color:var(--primary)}
    .nav-menu a.active, .nav-menu a:hover{
      background:linear-gradient(90deg, rgba(255,77,126,0.08), rgba(124,92,255,0.06));
      color:#fff;border:1px solid rgba(255,255,255,0.04);transform:translateY(-2px)
    }

    .card-compact{margin-top:16px;padding:12px;border-radius:10px;background:var(--glass);border:1px solid var(--glass-border)}
    .big-qr{width:100%;border-radius:8px;overflow:hidden;margin-top:12px;border:1px solid rgba(255,255,255,0.04)}
    .big-qr img{width:100%;display:block}

    /* Content */
    .hero{
      padding:22px;border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid var(--glass-border);box-shadow:0 8px 36px rgba(2,6,23,0.65)
    }
    .hero h2{font-size:1.4rem;margin-bottom:8px;color:var(--primary)}
    .hero p{color:var(--muted);margin-bottom:14px}

    .banners{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:16px 0}
    @media (max-width:760px){ .banners{grid-template-columns:repeat(2,1fr)} }
    .banner{
      padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;align-items:center;gap:10px;cursor:pointer;transition:all .18s
    }
    .banner img{width:100%;height:110px;object-fit:cover;border-radius:8px}
    .banner strong{color:#fff}

    /* Price grid */
    .price-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:14px;margin-top:18px}
    .price-card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      border:1px solid rgba(255,255,255,0.04);padding:14px;border-radius:12px;display:flex;flex-direction:column;align-items:center;gap:8px;
      transition:transform .15s, box-shadow .15s;
    }
    .price-card:hover{transform:translateY(-6px);box-shadow:0 12px 30px rgba(2,6,23,0.6)}
    .price-card .qty{font-weight:700;color:var(--primary);font-size:1.05rem}
    .price-card .cost{color:var(--muted);font-weight:600}
    .price-card button{margin-top:8px;padding:8px 12px;font-weight:700;border-radius:8px;border:none;background:linear-gradient(90deg,var(--primary),var(--accent));color:white;cursor:pointer}

    /* Custom input */
    .custom-diamond{display:flex;gap:8px;align-items:center;justify-content:space-between;padding:12px;border-radius:10px;border:1px dashed rgba(255,255,255,0.03);margin-top:16px}
    .custom-diamond input{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted)}
    .custom-diamond button{padding:10px 14px;border-radius:8px;background:linear-gradient(90deg,var(--primary),var(--accent));border:none;color:white;font-weight:700}

    /* Form */
    .form-section{margin-top:18px;padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:rgba(255,255,255,0.01)}
    .form-section label{display:block;text-align:left;color:var(--muted);font-weight:600;margin-bottom:6px}
    .form-section input{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted);margin-bottom:10px}

    .order-summary{display:flex;justify-content:space-between;gap:12px;align-items:center;padding:10px;border-radius:8px;background:rgba(0,0,0,0.12);margin-bottom:10px}
    .order-summary strong{color:var(--primary)}

    /* Order history */
    .order-history{margin-top:12px;padding:12px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02)}
    .order-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-bottom:1px dashed rgba(255,255,255,0.02)}
    .order-item:last-child{border-bottom:none}
    .order-item .meta{color:var(--muted);font-size:0.9rem}
    .status-badge{padding:6px 10px;border-radius:999px;font-weight:700}
    .status-pending{background:var(--warning);color:#000}
    .status-completed{background:var(--success);color:#000}

    /* Floating WA button */
    .whatsapp-chat{position:fixed;right:20px;bottom:20px;z-index:1000}
    .whatsapp-chat a{display:inline-grid;place-items:center;width:64px;height:64px;border-radius:999px;background:linear-gradient(90deg,#25D366,#1fae4b);box-shadow:0 12px 28px rgba(37,211,102,0.16);color:white;font-size:22px}

    /* Notification */
    .notification{position:fixed;top:20px;right:20px;padding:12px 16px;border-radius:10px;background:#0b1220;border:1px solid rgba(255,255,255,0.04);display:flex;gap:10px;align-items:center;transform:translateX(120%);transition:transform .3s,opacity .3s}
    .notification.show{transform:translateX(0);opacity:1}
    .notification.error{border-color:rgba(255,77,126,0.15);box-shadow:0 8px 30px rgba(255,77,126,0.06)}

    footer{margin-top:auto;padding:18px 22px;color:var(--muted);text-align:center;font-size:0.9rem}
  </style>
</head>
<body>
  <!-- Notification -->
  <div class="notification" id="notification" role="status" aria-live="polite">
    <i class="fas fa-check-circle"></i>
    <span id="notification-text">ការបញ្ជាទិញទទួលបានជោគជ័យ!</span>
  </div>

  <!-- Topbar -->
  <div class="topbar">
    <div class="brand">
      <div class="logo">KCE</div>
      <div>
        <h1>Kimchi Diamond</h1>
        <p>ទិញពេជ្រ Mobile Legends & Free Fire — 5-15 នាទី</p>
      </div>
    </div>

    <div class="top-actions">
      <div class="user-points"><i class="fas fa-coins"></i><span id="user-points">0</span> ពិន្ទុ</div>
      <div style="display:flex;gap:8px;align-items:center">
        <a class="btn" href="https://wa.me/855979450831?text=សួស្តី%20Kimchi%20Diamond,%20ខ្ញុំចង់ទិញពេជ្រ" target="_blank" style="text-decoration:none;color:var(--muted)">
          <i class="fab fa-whatsapp" style="font-size:18px;color:#25D366"></i>
        </a>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar" aria-label="Navigation">
      <div style="display:flex;gap:10px;align-items:center;justify-content:space-between">
        <strong style="font-size:0.95rem">ម៉ឺនុយ</strong>
        <small style="color:var(--muted)">ម៉ាស៊ីន</small>
      </div>

      <ul class="nav-menu" id="main-nav">
        <li><a href="#" data-page="home" class="active" onclick="showPage('home', this)"><i class="fas fa-home"></i> ទំព័រដើម</a></li>
        <li><a href="#" data-page="ml" onclick="showPage('ml', this)"><i class="fas fa-gamepad"></i> Mobile Legends</a></li>
        <li><a href="#" data-page="ff" onclick="showPage('ff', this)"><i class="fas fa-fire"></i> Free Fire</a></li>
        <li><a href="#" data-page="history" onclick="showPage('history', this)"><i class="fas fa-history"></i> ប្រវត្តិ</a></li>
        <li><a href="#" data-page="payment" onclick="showPage('payment', this)"><i class="fas fa-credit-card"></i> វិធីសាស្ត្រ</a></li>
        <li><a href="#" data-page="faq" onclick="showPage('faq', this)"><i class="fas fa-question-circle"></i> FAQ</a></li>
        <li><a href="#" data-page="about" onclick="showPage('about', this)"><i class="fas fa-info-circle"></i> អំពី</a></li>
      </ul>

      <div class="card-compact">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="color:var(--muted);font-size:0.85rem">ឈ្មោះគណនី</div>
            <div style="font-weight:700;margin-top:6px">Pho ChaiFong</div>
          </div>
          <div style="text-align:right">
            <div style="color:var(--muted);font-size:0.85rem">លេខគណនី</div>
            <div style="font-weight:700;margin-top:6px">004378149</div>
          </div>
        </div>
        <div class="big-qr" aria-hidden="true">
          <img src="photo_2025-09-08_12-24-17.jpg" alt="QR ABA">
        </div>
      </div>
    </aside>

    <!-- Main content -->
    <main>
      <!-- HOME -->
      <section id="home" class="page active">
        <div class="hero">
          <h2>សេវាកម្ម Top‑Up រហ័ស និងទុកចិត្ត</h2>
          <p>ទិញពេជ្រ Mobile Legends & Free Fire ឆាប់ក្នុងរយៈពេល 5–15 នាទី — តម្លៃប្រកួតប្រជែង និងគាំទ្រផ្ទាល់</p>

          <div class="banners" role="list">
            <div class="banner" onclick="showPage('ml', document.querySelector('[data-page=ml]'))">
              <img src="unnamed.png" alt="Mobile Legends">
              <strong>Mobile Legends</strong>
              <span style="color:var(--muted);font-size:0.85rem">ឆាប់ស្រួល</span>
            </div>
            <div class="banner" onclick="showPage('ff', document.querySelector('[data-page=ff]'))">
              <img src="free-fire-thumbnail.png" alt="Free Fire">
              <strong>Free Fire</strong>
              <span style="color:var(--muted);font-size:0.85rem">សុវត្ថិភាព</span>
            </div>
            <div class="banner" onclick="showPage('payment', document.querySelector('[data-page=payment]'))">
              <img src="e233f5b0c5a358449398f202b03f063a.jpg" alt="Payments">
              <strong>វិធីសាស្ត្រទូទាត់</strong>
              <span style="color:var(--muted);font-size:0.85rem">ABA • Wing • TrueMoney</span>
            </div>
          </div>

          <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:center">
            <div style="flex:1">
              <div style="color:var(--muted);font-weight:700">ពិន្ទុរង្វាន់</div>
              <div style="font-weight:800;font-size:1.1rem">ទទួល 1 ពិន្ទុរៀងរាល់ $1</div>
            </div>
            <div style="display:flex;gap:10px">
              <a href="#" onclick="showPage('history', document.querySelector('[data-page=history]'))" style="text-decoration:none">
                <button style="background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px 14px;border-radius:10px;color:var(--muted)">ប្រវត្តិ</button>
              </a>
              <a href="#" onclick="showPage('payment', document.querySelector('[data-page=payment]'))" style="text-decoration:none">
                <button style="background:linear-gradient(90deg,var(--primary),var(--accent));border:none;padding:10px 14px;border-radius:10px;color:#fff">វិធីសាស្ត្រ</button>
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- MOBILE LEGENDS -->
      <section id="ml" class="page" style="display:none">
        <div class="hero">
          <h2>Mobile Legends — តារាងតម្លៃ</h2>
          <p style="color:var(--muted)">ជ្រើសរើសកញ្ចប់ឬបញ្ចូលចំនួនផ្ទាល់ខ្លួន</p>

          <div class="custom-diamond">
            <input type="number" id="custom-diamond-input" placeholder="ចំនួនពេជ្រ (≥5)" min="5">
            <button onclick="calculateCustomPrice()">គណនា</button>
          </div>

          <div class="price-grid" id="ml-prices" aria-live="polite">
            <!-- price cards (kept same values) -->
            <div class="price-card"><div class="qty">5 💎</div><div class="cost">$0.05</div><button onclick="oML(5,0.05)">ទិញ</button></div>
            <div class="price-card"><div class="qty">11 💎</div><div class="cost">$0.11</div><button onclick="oML(11,0.11)">ទិញ</button></div>
            <div class="price-card"><div class="qty">23 💎</div><div class="cost">$0.23</div><button onclick="oML(23,0.23)">ទិញ</button></div>
            <div class="price-card"><div class="qty">50 💎</div><div class="cost">$0.49</div><button onclick="oML(50,0.49)">ទិញ</button></div>
            <div class="price-card"><div class="qty">75 💎</div><div class="cost">$0.73</div><button onclick="oML(75,0.73)">ទិញ</button></div>
            <div class="price-card"><div class="qty">101 💎</div><div class="cost">$0.98</div><button onclick="oML(101,0.98)">ទិញ</button></div>
            <div class="price-card"><div class="qty">150 💎</div><div class="cost">$1.46</div><button onclick="oML(150,1.46)">ទិញ</button></div>
            <div class="price-card"><div class="qty">200 💎</div><div class="cost">$1.95</div><button onclick="oML(200,1.95)">ទិញ</button></div>
            <div class="price-card"><div class="qty">250 💎</div><div class="cost">$2.44</div><button onclick="oML(250,2.44)">ទិញ</button></div>
            <div class="price-card"><div class="qty">300 💎</div><div class="cost">$2.93</div><button onclick="oML(300,2.93)">ទិញ</button></div>
            <div class="price-card"><div class="qty">400 💎</div><div class="cost">$3.90</div><button onclick="oML(400,3.90)">ទិញ</button></div>
            <div class="price-card"><div class="qty">500 💎</div><div class="cost">$4.88</div><button onclick="oML(500,4.88)">ទិញ</button></div>
            <div class="price-card"><div class="qty">700 💎</div><div class="cost">$6.83</div><button onclick="oML(700,6.83)">ទិញ</button></div>
            <div class="price-card"><div class="qty">1000 💎</div><div class="cost">$9.76</div><button onclick="oML(1000,9.76)">ទិញ</button></div>
            <div class="price-card"><div class="qty">1500 💎</div><div class="cost">$14.63</div><button onclick="oML(1500,14.63)">ទិញ</button></div>
            <div class="price-card"><div class="qty">2000 💎</div><div class="cost">$19.51</div><button onclick="oML(2000,19.51)">ទិញ</button></div>
            <div class="price-card"><div class="qty">2500 💎</div><div class="cost">$24.39</div><button onclick="oML(2500,24.39)">ទិញ</button></div>
            <div class="price-card"><div class="qty">3000 💎</div><div class="cost">$29.27</div><button onclick="oML(3000,29.27)">ទិញ</button></div>
            <div class="price-card"><div class="qty">4000 💎</div><div class="cost">$39.02</div><button onclick="oML(4000,39.02)">ទិញ</button></div>
            <div class="price-card"><div class="qty">6000 💎</div><div class="cost">$58.54</div><button onclick="oML(6000,58.54)">ទិញ</button></div>
            <div class="price-card"><div class="qty">8000 💎</div><div class="cost">$78.05</div><button onclick="oML(8000,78.05)">ទិញ</button></div>
            <div class="price-card"><div class="qty">10000 💎</div><div class="cost">$97.56</div><button onclick="oML(10000,97.56)">ទិញ</button></div>
          </div>

          <div id="custom-diamond-result" style="display:none;margin-top:12px">
            <div style="color:var(--muted)">តម្លៃ</div>
            <div style="font-weight:800;font-size:1.1rem">$<span id="custom-price">0</span></div>
            <div style="margin-top:10px"><button onclick="buyCustomPackage()">ទិញឥឡូវ</button></div>
          </div>

          <div class="form-section" id="f-ml" style="display:none">
            <div class="order-summary">
              <div>ពេជ្រ: <strong id="ml-diamonds">0</strong></div>
              <div>តម្លៃ: <strong>$<span id="ml-price">0.00</span></strong></div>
            </div>

            <label for="g-ml">Game ID</label>
            <input id="g-ml" placeholder="លេខ ID ហ្គេមរបស់អ្នក">
            <label for="s-ml">Server ID</label>
            <input id="s-ml" placeholder="លេខ Server ID">
            <label for="r-ml">Reference Number</label>
            <input id="r-ml" placeholder="លេខយោង">
            <div style="display:flex;gap:10px">
              <button onclick="subML()" style="flex:1;background:linear-gradient(90deg,var(--primary),var(--accent));border:none;color:white;padding:10px;border-radius:8px">បញ្ជាទិញ</button>
              <button onclick="document.getElementById('f-ml').style.display='none'" style="flex:1;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:10px;border-radius:8px">បោះបង់</button>
            </div>
          </div>
        </div>
      </section>

      <!-- FREE FIRE -->
      <section id="ff" class="page" style="display:none">
        <div class="hero">
          <h2>Free Fire — តារាងតម្លៃ</h2>
          <p style="color:var(--muted)">ជ្រើសរើសកញ្ចប់ឬបញ្ចូលចំនួនផ្ទាល់ខ្លួន</p>

          <div class="custom-diamond">
            <input type="number" id="custom-ff-input" placeholder="ចំនួនពេជ្រ (≥5)" min="5">
            <button onclick="calculateCustomFFPrice()">គណនា</button>
          </div>

          <div class="price-grid" aria-live="polite">
            <div class="price-card"><div class="qty">50 💎</div><div class="cost">$0.49</div><button onclick="oFF(50,0.49)">ទិញ</button></div>
            <div class="price-card"><div class="qty">100 💎</div><div class="cost">$0.98</div><button onclick="oFF(100,0.98)">ទិញ</button></div>
            <div class="price-card"><div class="qty">200 💎</div><div class="cost">$1.95</div><button onclick="oFF(200,1.95)">ទិញ</button></div>
            <div class="price-card"><div class="qty">500 💎</div><div class="cost">$4.88</div><button onclick="oFF(500,4.88)">ទិញ</button></div>
            <div class="price-card"><div class="qty">1000 💎</div><div class="cost">$9.76</div><button onclick="oFF(1000,9.76)">ទិញ</button></div>
            <div class="price-card"><div class="qty">2000 💎</div><div class="cost">$19.51</div><button onclick="oFF(2000,19.51)">ទិញ</button></div>
            <div class="price-card"><div class="qty">5000 💎</div><div class="cost">$48.78</div><button onclick="oFF(5000,48.78)">ទិញ</button></div>
            <div class="price-card"><div class="qty">10000 💎</div><div class="cost">$97.56</div><button onclick="oFF(10000,97.56)">ទិញ</button></div>
          </div>

          <div id="custom-ff-result" style="display:none;margin-top:12px">
            <div style="color:var(--muted)">តម្លៃ</div>
            <div style="font-weight:800;font-size:1.1rem">$<span id="custom-ff-price">0</span></div>
            <div style="margin-top:10px"><button onclick="buyCustomFFPackage()">ទិញឥឡូវ</button></div>
          </div>

          <div class="form-section" id="f-ff" style="display:none">
            <div class="order-summary">
              <div>ពេជ្រ: <strong id="ff-diamonds">0</strong></div>
              <div>តម្លៃ: <strong>$<span id="ff-price">0.00</span></strong></div>
            </div>

            <label for="g-ff">Game ID</label>
            <input id="g-ff" placeholder="លេខ ID ហ្គេមរបស់អ្នក">
            <label for="r-ff">Reference Number</label>
            <input id="r-ff" placeholder="លេខយោង">
            <div style="display:flex;gap:10px">
              <button onclick="subFF()" style="flex:1;background:linear-gradient(90deg,var(--primary),var(--accent));border:none;color:white;padding:10px;border-radius:8px">បញ្ជាទិញ</button>
              <button onclick="document.getElementById('f-ff').style.display='none'" style="flex:1;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:10px;border-radius:8px">បោះបង់</button>
            </div>
          </div>
        </div>
      </section>

      <!-- HISTORY -->
      <section id="history" class="page" style="display:none">
        <div class="hero">
          <h2>ប្រវត្តិការបញ្ជាទិញ</h2>
          <p style="color:var(--muted)">ទិញថ្មីៗ និងស្ថានភាព</p>

          <div class="order-history" id="orders-container">
            <p id="no-orders" style="padding:20px;text-align:center;color:var(--muted)">អ្នកមិនទាន់មានការបញ្ជាទិញណាមួយឡើយ។</p>
          </div>
        </div>
      </section>

      <!-- PAYMENT -->
      <section id="payment" class="page" style="display:none">
        <div class="hero">
          <h2>វិធីសាស្ត្រទូទាត់</h2>
          <p style="color:var(--muted)">ABA / Wing / TrueMoney — ការណែនាំអំពីវិធីទូទាត់</p>

          <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:12px">
            <div style="flex:1;border-radius:12px;padding:12px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02)">
              <strong>ABA</strong>
              <div style="color:var(--muted);margin-top:6px">ឈ្មោះ: Pho ChaiFong • លេខ: 004378149</div>
            </div>
            <div style="flex:1;border-radius:12px;padding:12px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02)">
              <strong>Wing</strong>
              <div style="color:var(--muted);margin-top:6px">បញ្ជាក់លេខទូរស័ព្ទ Wing របស់អ្នកនៅពេលផ្ទេរ</div>
            </div>
          </div>
        </div>
      </section>

      <!-- FAQ -->
      <section id="faq" class="page" style="display:none">
        <div class="hero">
          <h2>សំណួរដែលសួរញឹកញាប់</h2>
          <div style="margin-top:12px">
            <div style="margin-bottom:12px">
              <strong>តើពេលណាខ្ញុំនឹងទទួលបានពេជ្រ?</strong>
              <div style="color:var(--muted)">៤–១៥ នាទីបន្ទាប់ពីសម្ភាសន៍ និងផ្ទេរ</div>
            </div>
            <div style="margin-bottom:12px">
              <strong>តើខ្ញុំត្រូវផ្តល់អ្វីខ្លះ?</strong>
              <div style="color:var(--muted)">Game ID, Server ID (ML), និងលេខយោងទូទាត់</div>
            </div>
          </div>
        </div>
      </section>

      <!-- ABOUT -->
      <section id="about" class="page" style="display:none">
        <div class="hero">
          <h2>អំពីពួកយើង</h2>
          <p style="color:var(--muted)">Kimchi Diamond — Top‑up service Cambodia. 3+ years experience.</p>
        </div>
      </section>
    </main>
  </div>

  <!-- WhatsApp Chat Button -->
  <div class="whatsapp-chat">
    <a href="https://wa.me/855979450831" target="_blank" aria-label="WhatsApp Chat"><i class="fab fa-whatsapp"></i></a>
  </div>

  <footer>
    © <span id="footer-year"></span> Kimchi Diamond. All rights reserved. • <a href="tel:0979450831" style="color:inherit;text-decoration:underline">0979450831</a>
  </footer>

<script>
/* core logic preserved, updated showPage to set nav active via passed element */
let currentPaymentMethod = 'aba';
let currentPaymentMethodFF = 'aba';
let userPoints = 0;
let orders = JSON.parse(localStorage.getItem('kimchi_orders')) || [];

function showPage(pageId, el){
  document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
  const page = document.getElementById(pageId);
  if(page) page.style.display = 'block';

  // nav active management
  document.querySelectorAll('#main-nav a').forEach(a => a.classList.remove('active'));
  if(el && el.tagName === 'A') el.classList.add('active');
  else {
    const link = document.querySelector(`#main-nav a[data-page="${pageId}"]`);
    if(link) link.classList.add('active');
  }

  updateUserPoints();
  if(pageId === 'history') loadOrderHistory();

  // small UX: hide forms when leaving
  if(pageId !== 'ml') document.getElementById('f-ml') && (document.getElementById('f-ml').style.display = 'none');
  if(pageId !== 'ff') document.getElementById('f-ff') && (document.getElementById('f-ff').style.display = 'none');
}

/* update points display */
function updateUserPoints(){
  document.querySelectorAll('#user-points, #history-points, #ml-points, #ff-points').forEach(el => {
    if(el) el.textContent = userPoints;
  });
}

/* payment selection (kept simple) */
function selectPayment(method){
  currentPaymentMethod = method;
  document.getElementById('ml-payment-method') && (document.getElementById('ml-payment-method').textContent = method.toUpperCase());
}
function selectPaymentFF(method){
  currentPaymentMethodFF = method;
  document.getElementById('ff-payment-method') && (document.getElementById('ff-payment-method').textContent = method.toUpperCase());
}

/* orders */
function oML(diamonds, price){
  document.getElementById('ml-diamonds').textContent = diamonds;
  document.getElementById('ml-price').textContent = price.toFixed(2);
  document.getElementById('f-ml').style.display = 'block';
  document.getElementById('custom-diamond-result') && (document.getElementById('custom-diamond-result').style.display = 'none');
  document.getElementById('f-ml').scrollIntoView({behavior:'smooth'});
  showPage('ml', document.querySelector('[data-page=ml]'));
}
function oFF(diamonds, price){
  document.getElementById('ff-diamonds').textContent = diamonds;
  document.getElementById('ff-price').textContent = price.toFixed(2);
  document.getElementById('f-ff').style.display = 'block';
  document.getElementById('custom-ff-result') && (document.getElementById('custom-ff-result').style.display = 'none');
  document.getElementById('f-ff').scrollIntoView({behavior:'smooth'});
  showPage('ff', document.querySelector('[data-page=ff]'));
}

/* custom calculations */
function calculateCustomPrice(){
  const diamonds = parseInt(document.getElementById('custom-diamond-input').value);
  if(!Number.isInteger(diamonds) || diamonds < 5){ showNotification('សូមបញ្ចូលចំនួនពេជ្រយ៉ាងហោចណាស់ 5', true); return; }
  const price = (diamonds * 0.00976).toFixed(2);
  document.getElementById('custom-price').textContent = price;
  document.getElementById('custom-diamond-result').style.display = 'block';
}
function calculateCustomFFPrice(){
  const diamonds = parseInt(document.getElementById('custom-ff-input').value);
  if(!Number.isInteger(diamonds) || diamonds < 5){ showNotification('សូមបញ្ចូលចំនួនពេជ្រយ៉ាងហោចណាស់ 5', true); return; }
  const price = (diamonds * 0.00976).toFixed(2);
  document.getElementById('custom-ff-price').textContent = price;
  document.getElementById('custom-ff-result').style.display = 'block';
}
function buyCustomPackage(){
  const diamonds = parseInt(document.getElementById('custom-diamond-input').value);
  const price = (diamonds * 0.00976).toFixed(2);
  oML(diamonds, parseFloat(price));
}
function buyCustomFFPackage(){
  const diamonds = parseInt(document.getElementById('custom-ff-input').value);
  const price = (diamonds * 0.00976).toFixed(2);
  oFF(diamonds, parseFloat(price));
}

/* submit */
function subML(){
  const gameId = document.getElementById('g-ml').value.trim();
  const serverId = document.getElementById('s-ml').value.trim();
  const refNumber = document.getElementById('r-ml').value.trim();
  const diamonds = document.getElementById('ml-diamonds').textContent;
  const price = document.getElementById('ml-price').textContent;

  if(!gameId || !serverId || !refNumber){ showNotification('សូមបំពេញព័ត៌មានអោយបានពេញលេញ', true); return; }

  const order = { id:Date.now(), game:'Mobile Legends', gameId, serverId, refNumber, diamonds, price, status:'pending', date:new Date().toLocaleString('km-KH') };
  orders.push(order);
  localStorage.setItem('kimchi_orders', JSON.stringify(orders));

  userPoints += Math.floor(parseFloat(price) || 0);
  localStorage.setItem('kimchi_points', userPoints);
  updateUserPoints();

  showNotification('ការបញ្ជាទិញទទួលបានជោគជ័យ!');

  document.getElementById('g-ml').value=''; document.getElementById('s-ml').value=''; document.getElementById('r-ml').value='';
  document.getElementById('f-ml').style.display='none';
}

function subFF(){
  const gameId = document.getElementById('g-ff').value.trim();
  const refNumber = document.getElementById('r-ff').value.trim();
  const diamonds = document.getElementById('ff-diamonds').textContent;
  const price = document.getElementById('ff-price').textContent;

  if(!gameId || !refNumber){ showNotification('សូមបំពេញព័ត៌មានអោយបានពេញលេញ', true); return; }

  const order = { id:Date.now(), game:'Free Fire', gameId, refNumber, diamonds, price, status:'pending', date:new Date().toLocaleString('km-KH') };
  orders.push(order);
  localStorage.setItem('kimchi_orders', JSON.stringify(orders));

  userPoints += Math.floor(parseFloat(price) || 0);
  localStorage.setItem('kimchi_points', userPoints);
  updateUserPoints();

  showNotification('ការបញ្ជាទិញទទួលបានជោគជ័យ!');

  document.getElementById('g-ff').value=''; document.getElementById('r-ff').value='';
  document.getElementById('f-ff').style.display='none';
}

/* history */
function loadOrderHistory(){
  const container = document.getElementById('orders-container');
  const noOrders = document.getElementById('no-orders');
  if(!container) return;
  if(orders.length === 0){ noOrders.style.display = 'block'; container.innerHTML = ''; return; }
  noOrders.style.display = 'none';
  container.innerHTML = '';
  // show newest first
  [...orders].reverse().forEach(order => {
    const div = document.createElement('div');
    div.className = 'order-item';
    div.innerHTML = `
      <div>
        <div style="font-weight:700">${order.game}</div>
        <div class="meta">ID: ${order.gameId || '-'} ${order.serverId ? '| Server: '+order.serverId : ''}</div>
        <div class="meta">Ref: ${order.refNumber}</div>
      </div>
      <div style="text-align:right">
        <div style="font-weight:700">${order.diamonds} 💎</div>
        <div class="meta">$${order.price}</div>
        <div style="margin-top:6px"><span class="status-badge ${order.status==='completed'?'status-completed':'status-pending'}">${order.status==='completed'?'Completed':'Pending'}</span></div>
      </div>
    `;
    container.appendChild(div);
  });
}

/* notification */
function showNotification(message, isError=false){
  const n = document.getElementById('notification');
  const t = document.getElementById('notification-text');
  t.textContent = message;
  if(isError) n.classList.add('error'); else n.classList.remove('error');
  n.classList.add('show');
  setTimeout(()=> n.classList.remove('show'), 3000);
}

/* init */
document.addEventListener('DOMContentLoaded', () => {
  const savedPoints = localStorage.getItem('kimchi_points');
  if(savedPoints) userPoints = parseInt(savedPoints) || 0;
  updateUserPoints();
  document.getElementById('footer-year').textContent = new Date().getFullYear();
});
</script>
</body>
</html>

